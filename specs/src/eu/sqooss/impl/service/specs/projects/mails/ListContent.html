<html xmlns:concordion="http://www.concordion.org/2007/concordion">
<body>

    <h1>Getting the Mailing Lists</h1>

    <p>In order to allow analysis involving the mail traffic within projects, the system should allow
    to explore projects mailing lists archives.</p>
    
    <p>The system can create projects linked to a set of mailing list archives. The mailing lists can
    be explored for those projects and the messages examinated.</p>

    <div class="example">

        <h3>Example</h3>

        <p concordion:execute="addProject(#added_project, #scm_path)">Given the system has a project named
        "<span concordion:set="#added_project">savonet</span>" which mailing list archives lie in the
        "<span concordion:set="#scm_path">../specs/data/savonet-mail/mail</span>" and contains the
        "<span concordion:set="#list_name">Developer</span>" mailing list.</p>

        <p>Then this project has <span concordion:assertEquals="getMailCount(#added_project, #list_name)">2</span>
        messages in the mailing list. The messages are the following:</p>
        <table concordion:verifyRows="#message : getMails(#added_project, #list_name)">
          <tr>
            <th concordion:assertEquals="#message.date">Date</th>
            <th concordion:assertEquals="#message.from">From</th>
            <th concordion:assertEquals="#message.subject">Subject</th>
          </tr>
          <tr><td>Thu May 29 19:55:23 CEST 2008</td><td>Vincent Tabard &lt;vincent@radiopytagor.com&gt;</td><td>Re: [Savonet-devl] Liquidsoap stream management GUI</td></tr>
          <tr><td>Thu May 29 20:31:37 CEST 2008</td><td>Peter Brooks &lt;mail@pbrooks.net&gt;</td><td>Re: [Savonet-devl] Liquidsoap stream management GUI</td></tr>
        </table>

        <p>All those messages are marked as unread, so in the list there's currently
        <span concordion:assertEquals="getUnreadCount(#added_project, #list_name)">2</span> unread messages.</p>
        
        <p concordion:execute="markFirstMailAsSeen(#added_project, #list_name)">When we mark the first message as seen,
        then the list of unread messages becomes:</p>
        <table concordion:verifyRows="#message : getUnreadMails(#added_project, #list_name)">
          <tr>
            <th concordion:assertEquals="#message.date">Date</th>
            <th concordion:assertEquals="#message.from">From</th>
            <th concordion:assertEquals="#message.subject">Subject</th>
          </tr>
          <tr><td>Thu May 29 20:31:37 CEST 2008</td><td>Peter Brooks &lt;mail@pbrooks.net&gt;</td><td>Re: [Savonet-devl] Liquidsoap stream management GUI</td></tr>
        </table>
        
        <p>While the list of seen messages becomes:</p>
        <table concordion:verifyRows="#message : getSeenMails(#added_project, #list_name)">
          <tr>
            <th concordion:assertEquals="#message.date">Date</th>
            <th concordion:assertEquals="#message.from">From</th>
            <th concordion:assertEquals="#message.subject">Subject</th>
          </tr>
          <tr><td>Thu May 29 19:55:23 CEST 2008</td><td>Vincent Tabard &lt;vincent@radiopytagor.com&gt;</td><td>Re: [Savonet-devl] Liquidsoap stream management GUI</td></tr>
        </table>
        
    </div>
</body>
</html>
